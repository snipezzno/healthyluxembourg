<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <title>Healthy Luxembourg</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <style>
      html, body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; }
      .container-max { max-width: 80rem; width: 100%; margin-left: auto; margin-right: auto; }
      .bg-scene {
        background:
          radial-gradient(90rem 48rem at 18% 30%, rgba(140,198,63,0.3), transparent 55%),
          radial-gradient(70rem 38rem at 80% 20%, rgba(27,117,187,0.22), transparent 50%),
          radial-gradient(55rem 32rem at 72% 78%, rgba(27,117,187,0.18), transparent 55%),
          linear-gradient(180deg, #0b1512 0%, #060b0d 100%);
      }
      .vignette { pointer-events: none; box-shadow: inset 0 0 240px 100px rgba(0,0,0,0.35); }
      .bg-icons { position: fixed; inset: 0; pointer-events: none; overflow: hidden; z-index: -5; }
      .bg-icons .icon { position: absolute; opacity: 0.16; color: #8cc63f; }
      .bg-icons .blue { color: #1b75bb; opacity: 0.14; }
      .bg-icons .green { color: #8cc63f; opacity: 0.18; }
      @media (max-width: 640px) { 
        .bg-icons .icon { opacity: 0.08; transform: scale(0.5); }
        .vignette { box-shadow: inset 0 0 120px 50px rgba(0,0,0,0.35); }
      }
      button, a { -webkit-tap-highlight-color: transparent; }
      @media (max-width: 768px) {
        button, a { min-height: 44px; min-width: 44px; }
      }
      .modal-enter {
        animation: modalFadeIn 0.2s ease-out;
      }
      @keyframes modalFadeIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
      }
      .glow-green { box-shadow: 0 0 18px 2px rgba(140,198,63,0.3); }
      .glow-red { box-shadow: 0 0 18px 2px rgba(239,68,68,0.25); }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  </head>
  <body class="min-h-screen bg-[#07130f] text-gray-100 antialiased">
    <div class="fixed inset-0 -z-10 bg-scene"></div>
    <div class="bg-icons -z-10">
      <svg viewBox="0 0 100 100" class="icon green" style="left:2%; top:10%; width:120px; height:120px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 70 C15 40, 45 20, 70 20 C70 45, 55 70, 30 80 Z" />
        <path d="M20 65 C40 55, 55 45, 70 35" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="left:25%; top:50%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="8" y="35" width="20" height="30" rx="4" />
        <rect x="72" y="34" width="20" height="30" rx="4" />
        <line x1="28" y1="50" x2="72" y2="50" />
        <line x1="30" y1="40" x2="70" y2="40" />
        <line x1="30" y1="60" x2="70" y2="60" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon green" style="left:65%; top:8%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M50 75 C35 75, 22 70, 15 60 C25 60, 35 62, 42 66 C44 58, 47 52, 50 48 C53 52, 56 58, 58 66 C65 62, 75 60, 85 60 C78 70, 65 75, 50 75 Z" />
        <path d="M50 48 C46 44, 40 40, 34 39 C36 48, 40 56, 44 62" />
        <path d="M50 48 C54 44, 60 40, 66 39 C64 48, 60 56, 56 62" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="left:5%; bottom:15%; width:130px; height:130px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M50 78 L25 55 C15 42 22 28 35 28 C43 28 50 35 50 35 C50 35 57 28 65 28 C78 28 85 42 75 55 Z" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="right:2%; bottom:5%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="8" y="34" width="20" height="30" rx="4" />
        <rect x="72" y="34" width="20" height="30" rx="4" />
        <line x1="28" y1="50" x2="72" y2="50" />
        <line x1="30" y1="40" x2="70" y2="40" />
        <line x1="30" y1="60" x2="70" y2="60" />
      </svg>
    </div>
    <div class="fixed inset-0 -z-10 vignette"></div>
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // ==================== SUPABASE SETUP ====================
      const SUPABASE_URL = 'https://mzpzpqjxpulgljgiluaa.supabase.co';
      const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im16cHpwcWp4cHVsZ2xqZ2lsdWFhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzIxMzQ0NTAsImV4cCI6MjA4NzcxMDQ1MH0.Ap_eQoS-FvoQzTIzkkfDXWptqesgtKSMwbTGXgN4C1M';
      
      const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

      // ==================== HELPER FUNCTIONS ====================
      async function getStoredUser() {
        try {
          const { data: { user } } = await supabase.auth.getUser();
          if (!user) return null;
          
          const { data: profile } = await supabase
            .from('profiles')
            .select('*')
            .eq('id', user.id)
            .single();
            
          return profile || user;
        } catch (error) {
          console.warn('Failed to get stored user', error);
          return null;
        }
      }

      async function checkMembership(userId) {
        try {
          const { data, error } = await supabase
            .from('profiles')
            .select('subscription_status')
            .eq('id', userId)
            .single();
            
          return data?.subscription_status === 'active';
        } catch {
          return false;
        }
      }

      async function saveMembership(userId, email) {
        try {
          const { error } = await supabase
            .from('profiles')
            .update({ subscription_status: 'active' })
            .eq('id', userId);
            
          if (error) throw error;
          
          await supabase
            .from('profiles')
            .update({ total_savings: 0 })
            .eq('id', userId);
            
          return true;
        } catch (error) {
          console.error('Failed to save membership:', error);
          return false;
        }
      }

      // ==================== PARTNER DATA ====================
      const partners = [
        { name: 'Factory 4', icon: 'dumbbell', color: '#8CC63F', discount: 'from 125€ to 105€ per month for a year subscription and from 68€ to 49€ for the activation fee', hours: 'Daily 06:00-22:00', desc: 'Premium Gym, Conditioning, and Group Classes.' },
        { name: 'Elysium', icon: 'lotus', color: '#1B75BB', discount: 'Coming soon', hours: 'Daily 05:00-22:00', desc: 'Premium Gym, Group Classes, HYROX Performance Zone' },
      ];

      // ==================== ICON COMPONENTS ====================
      function IconDumbbell({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="6" strokeLinecap="round" strokeLinejoin="round">
            <rect x="6" y="34" width="22" height="32" rx="5" />
            <rect x="72" y="34" width="22" height="32" rx="5" />
            <line x1="28" y1="50" x2="72" y2="50" />
            <line x1="30" y1="40" x2="70" y2="40" />
            <line x1="30" y1="60" x2="70" y2="60" />
          </svg>
        );
      }

      function IconLotus({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M50 78 C35 78, 22 72, 15 62 C25 62, 35 64, 42 68 C44 60, 47 54, 50 50 C53 54, 56 60, 58 68 C65 64, 75 62, 85 62 C78 72, 65 78, 50 78 Z" />
            <path d="M50 50 C46 46, 40 42, 34 41 C36 50, 40 58, 44 64" />
            <path d="M50 50 C54 46, 60 42, 66 41 C64 50, 60 58, 56 64" />
          </svg>
        );
      }

      function IconApple({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M50 85 C35 90, 20 75, 22 58 C24 42, 35 40, 40 45 C45 50, 55 50, 60 45 C65 40, 76 42, 78 58 C80 75, 65 90, 50 85 Z" />
            <path d="M40 35 C45 30, 55 30, 60 35" />
            <path d="M42 28 C50 22, 58 24, 60 30" />
          </svg>
        );
      }

      function IconShoe({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M10 70 C25 65, 35 60, 45 65 C60 72, 75 72, 90 70 L90 78 L10 78 Z" />
            <path d="M44 58 L40 52 M48 60 L44 54 M52 62 L48 56" />
          </svg>
        );
      }

      function IconBag({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <rect x="18" y="35" width="64" height="50" rx="8" />
            <path d="M30 35 C30 25, 40 20, 50 20 C60 20, 70 25, 70 35" />
            <path d="M38 50 L38 55 M62 50 L62 55" />
          </svg>
        );
      }

      function renderPartnerIcon(type, color) {
        const style = { color };
        const size = window.innerWidth < 640 ? 36 : 44;
        switch (type) {
          case 'lotus':
            return <IconLotus size={size} style={style} />;
          case 'apple':
            return <IconApple size={size} style={style} />;
          case 'shoe':
            return <IconShoe size={size} style={style} />;
          case 'bag':
            return <IconBag size={size} style={style} />;
          case 'dumbbell':
          default:
            return <IconDumbbell size={size} style={style} />;
        }
      }

      // ==================== TRANSLATIONS ====================
      const translations = {
        en: {
          nav: { merchants: "Partners", about: "About", contact: "Contact", how: "How it works" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Healthy Food",
            bioWellness: "Bio & Wellness",
          },
          slogan: "Enjoy exclusive discounts in Luxembourg",
          intro: "Save at gyms, health and wellness businesses across Luxembourg with a simple membership.",
          join: "Get started",
          priceTag: "\u20AC 9,99/month",
          team: "Meet the founders",
          teamIntro: "Students from Lycee ECG building a healthier Luxembourg.",
          login: "Login",
          register: "Sign up",
          account: "My account",
          logout: "Log out",
          partners: "Featured partners",
          demoMessage: "Thank you for your interest! Subscription feature coming soon.",
          ctaDetails: "Join today and unlock member savings everywhere.",
        },
        fr: {
          nav: { merchants: "Partenaires", about: "A propos", contact: "Contact", how: "Comment ca marche ?" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga et Pilates",
            healthyFood: "Cuisine saine",
            bioWellness: "Bio & bien-etre",
          },
          slogan: "Profitez de reductions exclusives au Luxembourg.",
          intro: "Economisez dans les salles de sport et les commerces de sante et de bien-etre partout au Luxembourg avec une seule adhesion.",
          join: "Commencer",
          priceTag: "\u20AC 9,99/mois",
          team: "Notre equipe",
          teamIntro: "Une equipe d'etudiants du Lycee ECG qui imagine un Luxembourg plus sain.",
          login: "Connexion",
          register: "Inscription",
          account: "Mon compte",
          logout: "Se deconnecter",
          partners: "Nos partenaires phares",
          demoMessage: "Merci pour votre interet ! La fonction d'abonnement arrive bientot.",
          ctaDetails: "Rejoignez-nous des aujourd'hui et profitez d'avantages partout.",
        },
        de: {
          nav: { merchants: "Partner", about: "Uber uns", contact: "Kontakt", how: "So funktioniert's" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Gesunde Ernaehrung",
            bioWellness: "Bio & Wellness",
          },
          slogan: "Exklusive Rabatte in Luxemburg geniessen.",
          intro: "Spare bei Fitness, Gesundheit und Wellness in ganz Luxemburg mit einer einfachen Mitgliedschaft.",
          join: "Jetzt starten",
          priceTag: "\u20AC 9,99 pro Monat",
          team: "Unser Team",
          teamIntro: "Ein Team vom Lycee ECG arbeitet an einem gesunden Luxemburg.",
          login: "Anmelden",
          register: "Registrieren",
          account: "Mein Konto",
          logout: "Abmelden",
          partners: "Unsere Highlights",
          demoMessage: "Vielen Dank fur Ihr Interesse! Die Abo-Funktion kommt bald.",
          ctaDetails: "Sichere dir heute Vorteile in der ganzen Stadt.",
        },
        lb: {
          nav: { merchants: "Partner", about: "Iwwer eis", contact: "Kontakt", how: "Wéi geet dat?" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Gesond Iessen",
            bioWellness: "Bio & Wellness",
          },
          slogan: "Profiteier vun exklusive Rabatter zu Letzebuerg.",
          intro: "Spuer bei Fitness, Gesondheet a Wellness am ganze Land mat enger einfacher Memberschaft.",
          join: "Start hei",
          priceTag: "\u20AC 9,99/Mount",
          team: "Eist Team",
          teamIntro: "Eis Mini-Entreprise vum Lycee ECG mat engem Fokus op Gesondheet.",
          login: "Login",
          register: "Aschreiwen",
          account: "Mengen Account",
          logout: "Ausloggen",
          partners: "Eis Partner",
          demoMessage: "Merci fir dein Intressi! D'Abo-Funktioun kennt geschwenn.",
          ctaDetails: "Maach mat a kriss Membere Virdeeler iwwerall.",
        },
      };

      const teamMembers = [
        { name: 'Flyn SCHÜTZ', role: 'Finance & Strategy', image: 'https://i.imgur.com/1yjCvFO.png' },
        { name: 'Gabriel RECHE RECHE', role: 'Technology & Design', image: 'https://i.imgur.com/jQyH6zB.png' },
        { name: 'Max LEMAL', role: 'Marketing & Partnerships', image: 'https://i.imgur.com/mIFmNia.png' },
      ];

      const HERO_IMAGE_SRC = 'https://i.imgur.com/eKs0Yrj.png';
      const STRIPE_PAYMENT_LINK = 'https://buy.stripe.com/eVq9AV68Z92galI4R59Ve01';

      // ==================== MODAL COMPONENTS ====================

      function PartnersListModal({ onClose }) {
        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-2xl rounded-2xl border border-white/10 bg-neutral-900/95 p-6 shadow-xl max-h-[90vh] overflow-y-auto modal-enter">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">Our partners</h2>
                <button onClick={onClose} className="text-gray-400 hover:text-gray-200 text-2xl p-2 -m-2">&times;</button>
              </div>
              <div className="grid gap-4 sm:grid-cols-2">
                {partners.map((p, idx) => (
                  <div key={idx} className="rounded-xl border border-white/10 bg-white/5 p-4 hover:border-[#8cc63f]/40 transition">
                    <h3 className="text-lg font-semibold" style={{ color: p.color }}>{p.name}</h3>
                    <p className="text-sm text-gray-300 mt-1">{p.desc}</p>
                    <p className="text-xs text-gray-400 mt-2">⏰ {p.hours}</p>
                    <div className="mt-2 inline-block rounded-full border px-3 py-0.5 text-xs" style={{ borderColor: p.color+'55', color: p.color }}>{p.discount}</div>
                  </div>
                ))}
              </div>
              <p className="text-center text-gray-400 text-sm mt-6">➕ more partners coming soon</p>
            </div>
          </div>
        );
      }

      function HowItWorksModal({ onClose }) {
        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-2xl rounded-2xl border border-white/10 bg-neutral-900/95 p-6 sm:p-8 shadow-xl max-h-[90vh] overflow-y-auto modal-enter">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">How it works</h2>
                <button onClick={onClose} className="text-gray-400 hover:text-gray-200 text-2xl p-2 -m-2">&times;</button>
              </div>
              
              <div className="space-y-6 text-gray-200">
                <div className="flex items-start gap-4">
                  <div className="flex h-8 w-8 sm:h-10 sm:w-10 shrink-0 items-center justify-center rounded-full bg-[#8cc63f]/20 text-[#8cc63f] font-bold text-lg">1</div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">Sign up for €9.99/month</h3>
                    <p className="text-sm sm:text-base text-gray-300">Create your account in seconds. No hidden fees, cancel anytime.</p>
                  </div>
                </div>
                
                <div className="flex items-start gap-4">
                  <div className="flex h-8 w-8 sm:h-10 sm:w-10 shrink-0 items-center justify-center rounded-full bg-[#1b75bb]/20 text-[#1b75bb] font-bold text-lg">2</div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">Get your digital membership</h3>
                    <p className="text-sm sm:text-base text-gray-300">After payment, you'll receive a unique QR code via email and in your account dashboard.</p>
                  </div>
                </div>
                
                <div className="flex items-start gap-4">
                  <div className="flex h-8 w-8 sm:h-10 sm:w-10 shrink-0 items-center justify-center rounded-full bg-[#8cc63f]/20 text-[#8cc63f] font-bold text-lg">3</div>
                  <div>
                    <h3 className="text-lg font-semibold text-white mb-1">Show & save at partners</h3>
                    <p className="text-sm sm:text-base text-gray-300">Present your QR code at any partner gym, studio or shop to get your exclusive discount instantly.</p>
                  </div>
                </div>

                <div className="mt-6 rounded-xl border border-white/10 bg-white/5 p-4">
                  <h4 className="font-medium text-[#8cc63f] mb-2">Example benefits:</h4>
                  <ul className="list-disc pl-5 space-y-1 text-sm text-gray-300">
                    <li>Factory 4: from 125€ → 105€ / month + reduced activation fee</li>
                    <li>Elysium: discounts on memberships and classes (coming soon)</li>
                    <li>10% off BioGuster, 15% off YogaLoft</li>
                  </ul>
                </div>
                
                <p className="text-sm italic text-gray-400">One membership, one QR code — your passport to a healthier Luxembourg.</p>
              </div>
              
              <div className="mt-8 flex justify-end">
                <button onClick={onClose} className="rounded-lg bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-6 py-2 text-sm font-semibold text-[#04120c]">Got it</button>
              </div>
            </div>
          </div>
        );
      }

      function ContactFormModal({ type, onClose }) {
        const [formData, setFormData] = useState({
          name: '',
          email: '',
          business: '',
          phone: '',
          message: ''
        });
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [submitStatus, setSubmitStatus] = useState(null);

        const isPartnerForm = type === 'partner';
        const title = isPartnerForm ? 'Become a Partner' : 'Contact Us';

        const handleChange = (e) => {
          const { name, value } = e.target;
          setFormData(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = async (e) => {
          e.preventDefault();
          setIsSubmitting(true);
          
          const formElement = e.target;
          const formData = new FormData(formElement);
          formData.append('_next', 'https://formsubmit.co/send-x');
          
          try {
            const response = await fetch('https://formsubmit.co/ajax/healthyluxembourg.contact@gmail.com', {
              method: 'POST',
              body: formData
            });
            
            const result = await response.json();
            
            if (result.success) {
              setSubmitStatus('success');
              setTimeout(() => {
                onClose();
                setSubmitStatus(null);
                setFormData({ name: '', email: '', business: '', phone: '', message: '' });
              }, 2000);
            } else {
              setSubmitStatus('error');
              setTimeout(() => setSubmitStatus(null), 3000);
            }
          } catch (error) {
            setSubmitStatus('error');
            setTimeout(() => setSubmitStatus(null), 3000);
          } finally {
            setIsSubmitting(false);
          }
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-neutral-900/95 p-6 shadow-xl max-h-[90vh] overflow-y-auto modal-enter">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">{title}</h2>
                <button onClick={onClose} className="text-gray-400 hover:text-gray-200 text-2xl p-2 -m-2">&times;</button>
              </div>

              {submitStatus === 'success' && (
                <div className="mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-center">
                  Message sent successfully! We'll get back to you soon.
                </div>
              )}

              {submitStatus === 'error' && (
                <div className="mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-center">
                  Something went wrong. Please try again or email us directly.
                </div>
              )}

              <form className="grid gap-4" onSubmit={handleSubmit}>
                <input type="hidden" name="_subject" value={isPartnerForm ? 'Partner inquiry - Healthy Luxembourg' : 'Contact form message - Healthy Luxembourg'} />
                <input type="hidden" name="_captcha" value="false" />
                <input type="hidden" name="_template" value="table" />
                
                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400">Name & Surname *</label>
                  <input name="name" type="text" required value={formData.name} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" placeholder="Your full name" />
                </div>

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400">Email address *</label>
                  <input name="email" type="email" required value={formData.email} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" placeholder="you@example.com" />
                </div>

                {isPartnerForm && (
                  <>
                    <div className="grid gap-2">
                      <label className="text-sm uppercase tracking-wide text-gray-400">Business name *</label>
                      <input name="business" type="text" required value={formData.business} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" placeholder="Your business name" />
                    </div>

                    <div className="grid gap-2">
                      <label className="text-sm uppercase tracking-wide text-gray-400">Phone number (optional)</label>
                      <input name="phone" type="tel" value={formData.phone} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" placeholder="+352 ..." />
                    </div>
                  </>
                )}

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400">Message *</label>
                  <textarea name="message" rows="4" required value={formData.message} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" placeholder={isPartnerForm ? "Tell us about your business..." : "How can we help you?"} />
                </div>

                <button type="submit" disabled={isSubmitting} className="mt-2 w-full rounded-lg bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-2.5 text-sm font-semibold text-[#04120c] shadow-lg disabled:opacity-50">
                  {isSubmitting ? 'Sending...' : 'Send Message'}
                </button>
                
                <p className="text-xs text-gray-400 text-center">We'll respond within 24-48 hours.</p>
              </form>
            </div>
          </div>
        );
      }

      function AuthModal({ mode, onClose, onSubmit, onSwitchMode, error, successMessage }) {
        const isRegister = mode === 'register';
        const [form, setForm] = useState({ name: '', email: '', password: '' });

        useEffect(() => {
          setForm({ name: '', email: '', password: '' });
        }, [mode]);

        const handleChange = (e) => {
          const { name, value } = e.target;
          setForm(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = (e) => {
          e.preventDefault();
          onSubmit(mode, form);
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-neutral-900/95 p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">
                  {isRegister ? 'Create account' : 'Log in'}
                </h2>
                <button onClick={onClose} className="text-gray-400 hover:text-gray-200 text-2xl p-2 -m-2">&times;</button>
              </div>

              {successMessage && (
                <div className="mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400">
                  {successMessage}
                </div>
              )}

              <form className="grid gap-4" onSubmit={handleSubmit}>
                {isRegister && (
                  <div className="grid gap-2">
                    <label className="text-sm uppercase tracking-wide text-gray-400">Full name</label>
                    <input name="name" type="text" required placeholder="Your name" value={form.name} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" />
                  </div>
                )}

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400">Email</label>
                  <input name="email" type="email" required placeholder="you@example.com" value={form.email} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" />
                </div>

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400">Password</label>
                  <input name="password" type="password" required placeholder={isRegister ? 'min. 6 characters' : 'Your password'} value={form.password} onChange={handleChange} className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f]" />
                </div>

                {error && <p className="text-sm text-red-400">{error}</p>}

                <button type="submit" className="mt-2 w-full rounded-lg bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-2.5 text-sm font-semibold text-[#04120c] shadow-lg">
                  {isRegister ? 'Create account' : 'Log in'}
                </button>
              </form>

              <p className="mt-4 text-sm text-gray-300 text-center">
                {isRegister ? 'Already have an account?' : 'New here?'}{' '}
                <button className="text-[#8cc63f] hover:underline" onClick={() => onSwitchMode(isRegister ? 'login' : 'register')}>
                  {isRegister ? 'Log in' : 'Create account'}
                </button>
              </p>
            </div>
          </div>
        );
      }

      function DashboardModal({ user, onClose }) {
        const [member, setMember] = useState(false);
        const [savings, setSavings] = useState(0);
        
        useEffect(() => {
          if (!user) return;
          
          const checkStatus = async () => {
            const isMember = await checkMembership(user.id);
            setMember(isMember);
            
            const { data } = await supabase
              .from('profiles')
              .select('total_savings')
              .eq('id', user.id)
              .single();
              
            setSavings(data?.total_savings || 0);
          };
          
          checkStatus();
          
          const urlParams = new URLSearchParams(window.location.search);
          const paymentSuccess = urlParams.get('payment') === 'success';
          const sessionId = urlParams.get('session_id');
          
          if (paymentSuccess || sessionId) {
            saveMembership(user.id, user.email).then(() => {
              setMember(true);
              setTimeout(() => {
                window.location.reload();
              }, 500);
            });
            window.history.replaceState({}, document.title, window.location.pathname);
          }
        }, [user]);

        const handlePaymentClick = () => {
          localStorage.setItem('stripe-pending-user', JSON.stringify({
            id: user.id,
            email: user.email
          }));
          window.location.href = `${STRIPE_PAYMENT_LINK}?prefilled_email=${encodeURIComponent(user.email)}&client_reference_id=${encodeURIComponent(user.id)}`;
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-neutral-900/95 p-6 shadow-xl modal-enter">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl font-semibold text-white">My dashboard</h2>
                <button onClick={onClose} className="text-gray-400 hover:text-gray-200 text-2xl p-2 -m-2">&times;</button>
              </div>
              {user && (
                <div className="space-y-5">
                  <div className="pb-3 border-b border-white/10">
                    <p className="text-sm text-gray-400">Welcome back,</p>
                    <p className="text-xl font-medium text-white">{user.name || user.email}</p>
                    <p className="text-xs text-gray-500">{user.email}</p>
                  </div>

                  <div className={`flex items-center justify-between p-4 rounded-xl border ${member ? 'border-[#8cc63f]/30 glow-green' : 'border-red-500/30 glow-red'} bg-white/5`}>
                    <div>
                      <p className="text-sm text-gray-400">Membership</p>
                      <p className="text-lg font-semibold flex items-center gap-2">
                        {member ? 'Active' : 'Inactive'}
                        <span className={`inline-block h-3 w-3 rounded-full ${member ? 'bg-[#8cc63f] animate-pulse' : 'bg-red-500'}`}></span>
                      </p>
                    </div>
                    <div className="text-right">
                      <p className="text-sm text-gray-400">Total saved</p>
                      <p className="text-2xl font-bold text-[#8cc63f]">€ {savings}</p>
                    </div>
                  </div>

                  {!member && (
                    <button 
                      onClick={handlePaymentClick}
                      className="w-full rounded-lg bg-gradient-to-r from-[#8cc63f] to-[#1b75bb] px-4 py-3 font-semibold text-[#04120c] hover:opacity-90 transition"
                    >
                      Join now – €9.99/month
                    </button>
                  )}

                  {member && (
                    <div className="p-3 bg-white/5 rounded-lg text-sm text-gray-300 border border-white/10">
                      <span className="text-[#8cc63f] font-medium">✔ Member perk:</span> Show your QR code at any partner. (QR preview coming soon)
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>
        );
      }

      function Dropdown({ label, items = [] }) {
        const [open, setOpen] = useState(false);
        useEffect(() => {
          const handleClick = (event) => {
            if (!event.target.closest('#dropdown-anchor')) {
              setOpen(false);
            }
          };
          document.addEventListener('click', handleClick);
          return () => document.removeEventListener('click', handleClick);
        }, []);

        const normalizedItems = items.map((item) => (
          typeof item === 'string' ? { label: item, href: '#' } : { href: '#', ...item }
        ));

        return (
          <div id="dropdown-anchor" className="relative select-none">
            <button onClick={() => setOpen(!open)} className="py-2 px-3 text-sm text-white/70 hover:text-white whitespace-nowrap">
              {label}
            </button>
            {open && (
              <div className="absolute z-30 mt-2 min-w-[12rem] rounded-lg border border-white/10 bg-[#0f1d18]/95 p-1 text-gray-100 shadow-lg right-0 sm:right-auto">
                {normalizedItems.map((item, idx) => {
                  const handleClick = (event) => {
                    if (typeof item.onSelect === 'function') {
                      event.preventDefault();
                      item.onSelect();
                    }
                    setOpen(false);
                  };
                  return (
                    <a key={idx} href={item.href} className="block cursor-pointer rounded-md px-3 py-2 text-sm text-white/70 hover:bg-white/10 hover:text-white" onClick={handleClick}>
                      {item.label}
                    </a>
                  );
                })}
              </div>
            )}
          </div>
        );
      }

      // ==================== MAIN APP ====================
      function App() {
        const [language, setLanguage] = useState(() => localStorage.getItem('hl-lang') || 'en');
        const [user, setUser] = useState(null);
        const [authMode, setAuthMode] = useState(null);
        const [authError, setAuthError] = useState('');
        const [authSuccess, setAuthSuccess] = useState('');
        const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
        const [contactFormType, setContactFormType] = useState(null);
        const [howItWorksOpen, setHowItWorksOpen] = useState(false);
        const [partnersListOpen, setPartnersListOpen] = useState(false);
        const [dashboardOpen, setDashboardOpen] = useState(false);
        
        const languages = Object.keys(translations);

        useEffect(() => {
          const checkSession = async () => {
            const { data: { session } } = await supabase.auth.getSession();
            if (!session) {
              setUser(null);
            }
          };
          checkSession();
        }, []);

        useEffect(() => { 
          localStorage.setItem('hl-lang', language); 
        }, [language]);

       useEffect(() => { 
  localStorage.setItem('hl-lang', language); 
}, [language]);

// Handle email confirmation - auto-open login modal
useEffect(() => {
  const handleEmailConfirmation = async () => {
    const urlParams = new URLSearchParams(window.location.search);
    const tokenHash = urlParams.get('token_hash');
    const type = urlParams.get('type');
    
    console.log('URL params:', { tokenHash, type }); // Debug log
    
    if (tokenHash) {
      try {
        if (type === 'signup' || type === 'email') {
          const { error } = await supabase.auth.verifyOtp({
            token_hash: tokenHash,
            type: 'signup'
          });
          
          if (error) {
            console.error('Verification error:', error);
          } else {
            console.log('Email verified successfully!');
            // Clear URL parameters
            window.history.replaceState({}, document.title, '/');
            // Auto-open login modal
            setTimeout(() => {
              openAuthModal('login');
            }, 500);
          }
        }
      } catch (err) {
        console.error('Verification error:', err);
        window.history.replaceState({}, document.title, '/');
        openAuthModal('login');
      }
    }
  };
  
  handleEmailConfirmation();
}, [openAuthModal]);

// Listen for auth changes (SINGLE VERSION)
useEffect(() => {
  const initializeAuth = async () => {
    const { data: { session } } = await supabase.auth.getSession();
    if (session?.user) {
      const { data: profile } = await supabase
        .from('profiles')
        .select('*')
        .eq('id', session.user.id)
        .single();
        
      setUser(profile || { 
        id: session.user.id, 
        email: session.user.email,
        name: session.user.email?.split('@')[0]
      });
    }
  };
  
  initializeAuth();

  const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {
    console.log('Auth event:', event);
    
    if (event === 'SIGNED_IN' || event === 'TOKEN_REFRESHED') {
      if (session?.user) {
        const { data: profile } = await supabase
          .from('profiles')
          .select('*')
          .eq('id', session.user.id)
          .single();
          
        setUser(profile || { 
          id: session.user.id, 
          email: session.user.email,
          name: session.user.email?.split('@')[0]
        });
      }
    } else if (event === 'SIGNED_OUT') {
      console.log('User signed out, clearing state');
      setUser(null);
    } else if (event === 'USER_DELETED') {
      setUser(null);
    }
  });

  return () => subscription.unsubscribe();
}, []);

        const openAuthModal = (mode, successMsg = '') => {
          setAuthMode(mode);
          setAuthError('');
          setAuthSuccess(successMsg);
          setMobileMenuOpen(false);
        };

        const openContactForm = (type) => {
          setContactFormType(type);
          setMobileMenuOpen(false);
        };

        const closeContactForm = () => {
          setContactFormType(null);
        };

        const openHowItWorks = () => {
          setHowItWorksOpen(true);
          setMobileMenuOpen(false);
        };

        const openPartnersList = () => {
          setPartnersListOpen(true);
          setMobileMenuOpen(false);
        };

        const scrollToSection = (id) => {
          const el = document.getElementById(id);
          if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          setMobileMenuOpen(false);
        };

        const closeAuthModal = () => {
          setAuthMode(null);
          setAuthError('');
          setAuthSuccess('');
        };

        const sendWelcomeEmail = async (userName, userEmail) => {
          try {
            const serviceId = 'service_njj5xgd';
            const templateId = 'template_803vie8';
            const publicKey = '-AqsZYcMuBDs6MFzO';

            const templateParams = {
              name: userName,
              to_email: userEmail,
              from_name: "Healthy Luxembourg",
              reply_to: "healthyluxembourg.contact@gmail.com"
            };

            await emailjs.send(serviceId, templateId, templateParams, publicKey);
            return true;
          } catch (error) {
            console.error('Failed to send welcome email:', error);
            return false;
          }
        };

        const handleAuthSubmit = async (mode, formData) => {
  setAuthError('');
  setAuthSuccess('');
  
  const email = (formData.email || '').trim().toLowerCase();
  const password = (formData.password || '').trim();

  if (!email || !password) {
    setAuthError('Please enter your email and password.');
    return;
  }

  if (mode === 'login') {
    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password
    });
    
    if (error) {
      setAuthError(error.message);
      return;
    }
    
    closeAuthModal();
    return;
  }

  // REGISTER mode
  if ((formData.name || '').trim().length < 2) {
    setAuthError('Please enter your full name.');
    return;
  }

  if (password.length < 6) {
    setAuthError('Password must be at least 6 characters long.');
    return;
  }

  // Sign up with Supabase
const { data, error } = await supabase.auth.signUp({
  email,
  password,
  options: {
    data: {
      name: formData.name.trim()
    },
    emailRedirectTo: 'https://www.healthyluxembourg.com'
  }
});
  
  if (error) {
    setAuthError(error.message);
    return;
  }

  // Create profile record
  if (data.user) {
    await supabase
      .from('profiles')
      .insert([
        { 
          id: data.user.id,
          email,
          name: formData.name.trim(),
          subscription_status: 'inactive',
          total_savings: 0
        }
      ]);
  }
  
  await sendWelcomeEmail(formData.name.trim(), email);
  
  // Show success message and ask user to verify email
  setAuthSuccess('Account created! Please check your email for a verification link. Then log in with your credentials.');
  
  // Switch to login mode
  setAuthMode('login');
};

        const handleLogout = async () => {
          try {
            const { error } = await supabase.auth.signOut();
            if (error) throw error;
            
            setUser(null);
            localStorage.removeItem('hl-lang');
            window.location.href = '/';
            
          } catch (error) {
            console.error('Logout error:', error);
            setUser(null);
            window.location.href = '/';
          }
        };

        const t = translations[language] || translations.en;

        const handleJoin = () => {
          openAuthModal('register');
        };

        return (
          <div className="min-h-screen flex flex-col items-center">
            <nav className="sticky top-0 z-30 w-full border-b border-white/10 bg-[#0b1512]/80 backdrop-blur">
              <div className="container-max mx-auto flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4">
                <div className="flex items-center gap-2 sm:gap-3">
                  <img src={HERO_IMAGE_SRC} alt="Healthy Luxembourg logo" className="h-14 sm:h-20 md:h-24 w-auto" />
                  <span className="text-base sm:text-lg font-semibold text-white whitespace-nowrap">
                    <span className="mr-1 font-black text-[#8cc63f]">Healthy</span>
                    <span className="hidden xs:inline">Luxembourg</span>
                    <span className="xs:hidden">LUX</span>
                  </span>
                </div>

                <div className="hidden lg:flex items-center gap-4 xl:gap-8 text-sm text-white/70">
                  <Dropdown
                    label={t.nav.merchants}
                    items={[
                      { label: 'Become partner', onSelect: () => openContactForm('partner') },
                      { label: 'List of partners', onSelect: openPartnersList },
                    ]}
                  />
                  <button onClick={() => scrollToSection('about-section')} className="hover:text-white px-2 py-2">{t.nav.about}</button>
                  <button onClick={() => openContactForm('contact')} className="hover:text-white px-2 py-2">{t.nav.contact}</button>
                  <button onClick={openHowItWorks} className="hover:text-white px-2 py-2">{t.nav.how}</button>
                </div>

                <div className="flex items-center gap-1 sm:gap-2 md:gap-3">
                  <Dropdown
                    label={language === 'lb' ? 'LU' : language.toUpperCase()}
                    items={languages.map(code => ({
                      label: code === 'lb' ? 'LU' : code.toUpperCase(),
                      onSelect: () => setLanguage(code),
                    }))}
                  />
                  
                  <button onClick={() => setMobileMenuOpen(!mobileMenuOpen)} className="lg:hidden p-2 text-white/70 hover:text-white">
                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      {mobileMenuOpen ? (
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                      ) : (
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                      )}
                    </svg>
                  </button>

                  <div className="hidden md:flex items-center gap-2">
                    {user ? (
                      <>
                        <button onClick={() => setDashboardOpen(true)} className="rounded-full border border-[#8cc63f]/60 bg-[#8cc63f]/10 px-3 py-1.5 text-xs font-medium text-[#8cc63f] hover:bg-[#8cc63f]/20 whitespace-nowrap">
                          {t.account}: {user.name?.split(' ')[0] || user.email?.split('@')[0]}
                        </button>
                        <button onClick={handleLogout} className="rounded-full border border-white/20 bg-transparent px-3 py-1.5 text-xs font-medium text-white/70 hover:border-white/40 hover:text-white whitespace-nowrap">
                          {t.logout}
                        </button>
                      </>
                    ) : (
                      <>
                        <button onClick={() => openAuthModal('login')} className="rounded-full border border-white/20 bg-transparent px-3 py-1.5 text-xs font-medium text-white/70 hover:border-white/40 hover:text-white whitespace-nowrap">
                          {t.login}
                        </button>
                        <button onClick={() => openAuthModal('register')} className="rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-3 py-1.5 text-xs font-semibold text-[#04120c] shadow-lg hover:scale-[1.03] whitespace-nowrap">
                          {t.register}
                        </button>
                      </>
                    )}
                  </div>
                </div>
              </div>

              {mobileMenuOpen && (
                <div className="lg:hidden border-t border-white/10 bg-[#0b1512]/95">
                  <div className="container-max mx-auto px-4 py-4 flex flex-col gap-2">
                    <Dropdown
                      label={t.nav.merchants}
                      items={[
                        { label: 'Become partner', onSelect: () => { openContactForm('partner'); setMobileMenuOpen(false); } },
                        { label: 'List of partners', onSelect: () => { openPartnersList(); setMobileMenuOpen(false); } },
                      ]}
                    />
                    <button onClick={() => scrollToSection('about-section')} className="py-3 text-left text-white/70 hover:text-white">About</button>
                    <button onClick={() => { openContactForm('contact'); setMobileMenuOpen(false); }} className="py-3 text-left text-white/70 hover:text-white">Contact</button>
                    <button onClick={() => { openHowItWorks(); setMobileMenuOpen(false); }} className="py-3 text-left text-white/70 hover:text-white">How it works</button>
                    
                    <div className="flex flex-col gap-2 pt-4 border-t border-white/10">
                      {user ? (
                        <>
                          <button onClick={() => { setDashboardOpen(true); setMobileMenuOpen(false); }} className="w-full rounded-full border border-[#8cc63f]/60 bg-[#8cc63f]/10 px-4 py-3 text-sm font-medium text-[#8cc63f]">
                            {t.account}
                          </button>
                          <button onClick={() => { handleLogout(); setMobileMenuOpen(false); }} className="w-full rounded-full border border-white/20 bg-transparent px-4 py-3 text-sm font-medium text-white/70">
                            {t.logout}
                          </button>
                        </>
                      ) : (
                        <>
                          <button onClick={() => openAuthModal('login')} className="w-full rounded-full border border-white/20 bg-transparent px-4 py-3 text-sm font-medium text-white/70">
                            {t.login}
                          </button>
                          <button onClick={() => openAuthModal('register')} className="w-full rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-3 text-sm font-semibold text-[#04120c]">
                            {t.register}
                          </button>
                        </>
                      )}
                    </div>
                  </div>
                </div>
              )}
            </nav>

            <main className="flex-1 w-full">
              <section className="relative px-4 sm:px-6 pt-12 sm:pt-16 pb-16 sm:pb-24 md:pt-24">
                <div className="container-max mx-auto">
                  <div className="grid items-center gap-8 lg:gap-16 lg:grid-cols-[1.05fr_1fr]">
                    <div className="space-y-6 sm:space-y-8 text-left">
                      <div className="inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 sm:px-5 py-1.5 sm:py-2 text-xs font-semibold uppercase tracking-[0.25em] sm:tracking-[0.35em] text-[#8cc63f]">
                        Healthy Luxembourg
                      </div>
                      <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-semibold leading-[1.08] pb-1 sm:pb-2 text-transparent bg-clip-text bg-gradient-to-r from-[#8cc63f] to-[#1b75bb]">
                        {t.slogan}
                      </h1>
                      <div className="flex flex-wrap items-center gap-3 sm:gap-4 text-2xl sm:text-3xl md:text-4xl font-semibold text-[#8cc63f]">
                        {t.priceTag}
                      </div>
                      <p className="max-w-xl text-base sm:text-lg text-gray-300">
                        {t.intro}
                      </p>
                      <div className="flex flex-col gap-4 sm:flex-row sm:items-center">
                        <button onClick={handleJoin} className="w-full sm:w-auto inline-flex items-center justify-center rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-6 sm:px-8 py-3 text-base sm:text-lg font-semibold text-[#04120c] shadow-lg hover:scale-[1.02]">
                          {t.join}
                        </button>
                        <div className="flex items-center gap-3 text-sm text-gray-300">
                          <span className="inline-flex h-10 w-10 sm:h-11 sm:w-11 items-center justify-center rounded-full border border-white/15 bg-white/5 text-base font-semibold text-[#8cc63f] flex-shrink-0">
                            %
                          </span>
                          <span className="text-xs sm:text-sm leading-relaxed">
                            {t.ctaDetails}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div className="relative min-h-[200px] sm:min-h-[360px] flex items-center justify-center lg:justify-end">
                      <div className="pointer-events-none">
                        <img src={HERO_IMAGE_SRC} alt="Healthy Luxembourg logo background" className="h-[180px] sm:h-[280px] md:h-[350px] lg:h-[420px] w-auto max-w-[90vw] opacity-16 sm:opacity-20" />
                      </div>
                    </div>
                  </div>

                  <div className="mt-16 sm:mt-20 scroll-mt-32" id="partners">
                    <h2 className="text-center text-xs sm:text-sm font-semibold uppercase tracking-[0.25em] sm:tracking-[0.35em] text-[#8cc63f]">{t.partners}</h2>
                    <div className="mt-6 sm:mt-8 mx-auto grid max-w-4xl grid-cols-1 sm:grid-cols-2 justify-items-center gap-4 sm:gap-6">
                      {partners.slice(0,2).map((partner, index) => (
                        <div key={index} className="relative w-full overflow-hidden rounded-xl sm:rounded-2xl border border-white/10 bg-[#0f1d18]/80 p-4 sm:p-6 shadow-lg hover:-translate-y-1 hover:border-[#8cc63f]/40">
                          <div className="flex items-start gap-3 sm:gap-4">
                            <div className="flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-xl sm:rounded-2xl border bg-white/5" style={{ borderColor: `${partner.color}55`, background: `linear-gradient(135deg, ${partner.color}1a 0%, rgba(9,22,18,0.8) 100%)` }}>
                              {renderPartnerIcon(partner.icon, partner.color)}
                            </div>
                            <div className="min-w-0 flex-1">
                              <h3 className="text-base sm:text-lg font-semibold text-white truncate">{partner.name}</h3>
                              <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300 line-clamp-2">{partner.desc}</p>
                              <div className="mt-3 sm:mt-4 flex flex-wrap items-center gap-2 text-xs">
                                <span className="inline-flex items-center rounded-full border px-2 sm:px-3 py-0.5 sm:py-1 font-medium" style={{ borderColor: `${partner.color}55`, color: partner.color }}>
                                  {partner.discount}
                                </span>
                                <span className="inline-flex items-center rounded-full border border-white/15 bg-white/5 px-2 sm:px-3 py-0.5 sm:py-1 text-gray-300">
                                  {partner.hours}
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div className="mt-16 sm:mt-24 rounded-2xl sm:rounded-3xl border border-white/10 bg-[#0f1d19]/70 p-6 sm:p-8 md:p-12 shadow-lg" id="about-section">
                    <div className="flex flex-col gap-4 sm:gap-6 md:flex-row md:items-end md:justify-between">
                      <div>
                        <h2 className="text-2xl sm:text-3xl md:text-4xl font-semibold text-white">{t.team}</h2>
                        <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300">
                          {t.teamIntro}
                        </p>
                      </div>
                      <div className="flex items-center gap-3 text-xs uppercase tracking-[0.25em] sm:tracking-[0.35em] text-white/50">
                        <span className="inline-flex h-2 w-2 rounded-full bg-[#8cc63f]"></span>
                        {new Date().getFullYear()}
                      </div>
                    </div>
                    <div className="mt-8 sm:mt-10 grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-3">
                      {teamMembers.map((member, index) => (
                        <div key={index} className="group relative flex flex-col items-center overflow-hidden rounded-xl sm:rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-6 text-center shadow-lg hover:-translate-y-1 hover:border-[#8cc63f]/40">
                          <div className="relative mb-4 sm:mb-5 h-28 w-28 sm:h-32 sm:w-32 md:h-36 md:w-36 overflow-hidden rounded-full sm:rounded-none bg-transparent">
                            <img src={member.image} alt={`${member.name} portrait`} className="h-full w-full object-cover object-center opacity-90 group-hover:scale-[1.02]" />
                          </div>
                          <h3 className="text-base sm:text-lg font-semibold text-white">{member.name}</h3>
                          <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300">{member.role}</p>
                        </div>
                      ))}
                    </div>
                  </div>
                </div>
              </section>
            </main>

            {authMode && (
              <AuthModal
                mode={authMode}
                onClose={closeAuthModal}
                onSubmit={handleAuthSubmit}
                onSwitchMode={(mode) => openAuthModal(mode)}
                error={authError}
                successMessage={authSuccess}
              />
            )}

            {contactFormType && (
              <ContactFormModal type={contactFormType} onClose={closeContactForm} />
            )}

            {howItWorksOpen && (
              <HowItWorksModal onClose={() => setHowItWorksOpen(false)} />
            )}

            {partnersListOpen && (
              <PartnersListModal onClose={() => setPartnersListOpen(false)} />
            )}

            {dashboardOpen && user && (
              <DashboardModal user={user} onClose={() => setDashboardOpen(false)} />
            )}

            <footer className="w-full px-4 sm:px-6 pb-8 sm:pb-12 text-center text-xs sm:text-sm text-white/40">
              <p>&copy; {new Date().getFullYear()} Healthy Luxembourg — All rights reserved.</p>
            </footer>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>








