<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <title>Healthy Luxembourg</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <style>
      html, body { font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"; }
      .container-max { max-width: 80rem; width: 100%; margin-left: auto; margin-right: auto; }
      .bg-scene {
        background:
          radial-gradient(90rem 48rem at 18% 30%, rgba(140,198,63,0.3), transparent 55%),
          radial-gradient(70rem 38rem at 80% 20%, rgba(27,117,187,0.22), transparent 50%),
          radial-gradient(55rem 32rem at 72% 78%, rgba(27,117,187,0.18), transparent 55%),
          linear-gradient(180deg, #0b1512 0%, #060b0d 100%);
      }
      .vignette { pointer-events: none; box-shadow: inset 0 0 240px 100px rgba(0,0,0,0.35); }
      .bg-icons { position: fixed; inset: 0; pointer-events: none; overflow: hidden; }
      .bg-icons .icon { position: absolute; opacity: 0.16; color: #8cc63f; }
      .bg-icons .blue { color: #1b75bb; opacity: 0.14; }
      .bg-icons .green { color: #8cc63f; opacity: 0.18; }
      @media (max-width: 640px) { 
        .bg-icons .icon { opacity: 0.08; transform: scale(0.5); }
        .vignette { box-shadow: inset 0 0 120px 50px rgba(0,0,0,0.35); }
      }
      button, a { -webkit-tap-highlight-color: transparent; }
      @media (max-width: 768px) {
        button, a { min-height: 44px; min-width: 44px; }
      }
      /* Modal animations */
      .modal-enter {
        animation: modalFadeIn 0.2s ease-out;
      }
      @keyframes modalFadeIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
      }
    </style>
  </head>
  <body class="min-h-screen bg-[#07130f] text-gray-100 antialiased">
    <div class="fixed inset-0 -z-10 bg-scene"></div>
    <div class="bg-icons -z-10">
      <svg viewBox="0 0 100 100" class="icon green" style="left:2%; top:10%; width:120px; height:120px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M15 70 C15 40, 45 20, 70 20 C70 45, 55 70, 30 80 Z" />
        <path d="M20 65 C40 55, 55 45, 70 35" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="left:25%; top:50%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="8" y="35" width="20" height="30" rx="4" />
        <rect x="72" y="35" width="20" height="30" rx="4" />
        <line x1="28" y1="50" x2="72" y2="50" />
        <line x1="30" y1="40" x2="70" y2="40" />
        <line x1="30" y1="60" x2="70" y2="60" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon green" style="left:65%; top:8%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M50 75 C35 75, 22 70, 15 60 C25 60, 35 62, 42 66 C44 58, 47 52, 50 48 C53 52, 56 58, 58 66 C65 62, 75 60, 85 60 C78 70, 65 75, 50 75 Z" />
        <path d="M50 48 C46 44, 40 40, 34 39 C36 48, 40 56, 44 62" />
        <path d="M50 48 C54 44, 60 40, 66 39 C64 48, 60 56, 56 62" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="left:5%; bottom:15%; width:130px; height:130px;" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
        <path d="M50 78 L25 55 C15 42 22 28 35 28 C43 28 50 35 50 35 C50 35 57 28 65 28 C78 28 85 42 75 55 Z" />
      </svg>
      <svg viewBox="0 0 100 100" class="icon blue" style="right:2%; bottom:5%; width:140px; height:140px;" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round">
        <rect x="8" y="35" width="20" height="30" rx="4" />
        <rect x="72" y="35" width="20" height="30" rx="4" />
        <line x1="28" y1="50" x2="72" y2="50" />
        <line x1="30" y1="40" x2="70" y2="40" />
        <line x1="30" y1="60" x2="70" y2="60" />
      </svg>
    </div>
    <div class="fixed inset-0 -z-10 vignette"></div>
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // Helper functions for user management
      function getAllUsers() {
        try {
          const raw = localStorage.getItem('hl-users');
          return raw ? JSON.parse(raw) : [];
        } catch (error) {
          console.warn('Failed to parse stored users', error);
          return [];
        }
      }

      function getStoredUser() {
        try {
          const authed = localStorage.getItem('hl-authenticated') === 'true';
          if (!authed) { return null; }
          
          const currentUserEmail = localStorage.getItem('hl-current-user-email');
          if (!currentUserEmail) return null;
          
          const users = getAllUsers();
          return users.find(u => u.email === currentUserEmail) || null;
        } catch (error) {
          console.warn('Failed to read stored authentication', error);
          return null;
        }
      }

      // Contact Form Modal Component
      function ContactFormModal({ type, onClose }) {
        const [formData, setFormData] = useState({
          name: '',
          email: '',
          business: '',
          phone: '',
          message: ''
        });
        const [isSubmitting, setIsSubmitting] = useState(false);
        const [submitStatus, setSubmitStatus] = useState(null);

        const isPartnerForm = type === 'partner';
        const title = isPartnerForm ? 'Become a Partner' : 'Contact Us';

        const handleChange = (e) => {
          const { name, value } = e.target;
          setFormData(prev => ({ ...prev, [name]: value }));
        };

        const handleSubmit = async (e) => {
          e.preventDefault();
          setIsSubmitting(true);
          
          // Prepare form data for FormSubmit
          const formElement = e.target;
          const formData = new FormData(formElement);
          
          // Add redirect to prevent navigation
          formData.append('_next', 'https://formsubmit.co/send-x');
          
          try {
            // Use the ajax endpoint
            const response = await fetch('https://formsubmit.co/ajax/healthyluxembourg.contact@gmail.com', {
              method: 'POST',
              body: formData
            });
            
            const result = await response.json();
            console.log('Form submit result:', result);
            
            if (result.success) {
              setSubmitStatus('success');
              setTimeout(() => {
                onClose();
                setSubmitStatus(null);
                setFormData({ name: '', email: '', business: '', phone: '', message: '' });
              }, 2000);
            } else {
              setSubmitStatus('error');
              setTimeout(() => setSubmitStatus(null), 3000);
            }
          } catch (error) {
            console.error('Form submission error:', error);
            setSubmitStatus('error');
            setTimeout(() => setSubmitStatus(null), 3000);
          } finally {
            setIsSubmitting(false);
          }
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-neutral-900/95 p-6 shadow-xl max-h-[90vh] overflow-y-auto modal-enter">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">{title}</h2>
                <button
                  onClick={onClose}
                  className="text-gray-400 hover:text-gray-200 transition text-2xl leading-none p-2 -m-2"
                  aria-label="Close"
                >
                  &times;
                </button>
              </div>

              {submitStatus === 'success' && (
                <div className="mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-center">
                  Message sent successfully! We'll get back to you soon.
                </div>
              )}

              {submitStatus === 'error' && (
                <div className="mb-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg text-red-400 text-center">
                  Something went wrong. Please try again or email us directly.
                </div>
              )}

              <form 
                className="grid gap-4" 
                onSubmit={handleSubmit}
              >
                <input type="hidden" name="_subject" value={isPartnerForm ? 'Partner inquiry - Healthy Luxembourg' : 'Contact form message - Healthy Luxembourg'} />
                <input type="hidden" name="_captcha" value="false" />
                <input type="hidden" name="_template" value="table" />
                
                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="name">Name & Surname *</label>
                  <input
                    id="name"
                    name="name"
                    type="text"
                    required
                    value={formData.name}
                    onChange={handleChange}
                    className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                    placeholder="Your full name"
                  />
                </div>

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="email">Email address *</label>
                  <input
                    id="email"
                    name="email"
                    type="email"
                    required
                    value={formData.email}
                    onChange={handleChange}
                    className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                    placeholder="you@example.com"
                  />
                </div>

                {isPartnerForm && (
                  <>
                    <div className="grid gap-2">
                      <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="business">Business name *</label>
                      <input
                        id="business"
                        name="business"
                        type="text"
                        required
                        value={formData.business}
                        onChange={handleChange}
                        className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                        placeholder="Your business name"
                      />
                    </div>

                    <div className="grid gap-2">
                      <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="phone">Phone number (optional)</label>
                      <input
                        id="phone"
                        name="phone"
                        type="tel"
                        value={formData.phone}
                        onChange={handleChange}
                        className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                        placeholder="+352 ..."
                      />
                    </div>
                  </>
                )}

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="message">Message *</label>
                  <textarea
                    id="message"
                    name="message"
                    rows="4"
                    required
                    value={formData.message}
                    onChange={handleChange}
                    className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                    placeholder={isPartnerForm ? "Tell us about your business and why you'd like to partner with us..." : "How can we help you?"}
                  />
                </div>

                <button
                  type="submit"
                  disabled={isSubmitting}
                  className="mt-2 w-full inline-flex justify-center rounded-lg bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-2.5 text-sm font-semibold text-[#04120c] shadow-[0_15px_35px_rgba(20,90,120,0.35)] transition hover:scale-[1.01] active:scale-[0.99] disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {isSubmitting ? 'Sending...' : 'Send Message'}
                </button>
                
                <p className="text-xs text-gray-400 text-center">
                  We'll respond within 24-48 hours.
                </p>
              </form>
            </div>
          </div>
        );
      }

      function Dropdown({ label, items = [] }) {
        const [open, setOpen] = useState(false);
        useEffect(() => {
          const handleClick = (event) => {
            if (!event.target.closest('#dropdown-anchor')) {
              setOpen(false);
            }
          };
          document.addEventListener('click', handleClick);
          return () => document.removeEventListener('click', handleClick);
        }, []);

        const normalizedItems = items.map((item) => (
          typeof item === 'string' ? { label: item, href: '#' } : { href: '#', ...item }
        ));

        return (
          <div id="dropdown-anchor" className="relative select-none">
            <button
              onClick={() => setOpen((prev) => !prev)}
              className="py-2 px-3 text-sm text-white/70 transition hover:text-white whitespace-nowrap"
            >
              {label}
            </button>
            {open && (
              <div className="absolute z-30 mt-2 min-w-[12rem] rounded-lg border border-white/10 bg-[#0f1d18]/95 p-1 text-gray-100 shadow-[0_18px_45px_rgba(6,18,14,0.4)] right-0 sm:right-auto">
                {normalizedItems.map((item, idx) => {
                  const handleClick = (event) => {
                    if (typeof item.onSelect === 'function') {
                      event.preventDefault();
                      item.onSelect();
                    }
                    setOpen(false);
                  };
                  return (
                    <a
                      key={idx}
                      href={item.href}
                      className="block cursor-pointer rounded-md px-3 py-2 text-sm text-white/70 transition hover:bg-white/10 hover:text-white"
                      onClick={handleClick}
                    >
                      {item.label}
                    </a>
                  );
                })}
              </div>
            )}
          </div>
        );
      }

      function IconDumbbell({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="6" strokeLinecap="round" strokeLinejoin="round">
            <rect x="6" y="34" width="22" height="32" rx="5" />
            <rect x="72" y="34" width="22" height="32" rx="5" />
            <line x1="28" y1="50" x2="72" y2="50" />
            <line x1="30" y1="40" x2="70" y2="40" />
            <line x1="30" y1="60" x2="70" y2="60" />
          </svg>
        );
      }

      function IconLotus({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M50 78 C35 78, 22 72, 15 62 C25 62, 35 64, 42 68 C44 60, 47 54, 50 50 C53 54, 56 60, 58 68 C65 64, 75 62, 85 62 C78 72, 65 78, 50 78 Z" />
            <path d="M50 50 C46 46, 40 42, 34 41 C36 50, 40 58, 44 64" />
            <path d="M50 50 C54 46, 60 42, 66 41 C64 50, 60 58, 56 64" />
          </svg>
        );
      }

      function IconApple({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M50 85 C35 90, 20 75, 22 58 C24 42, 35 40, 40 45 C45 50, 55 50, 60 45 C65 40, 76 42, 78 58 C80 75, 65 90, 50 85 Z" />
            <path d="M40 35 C45 30, 55 30, 60 35" />
            <path d="M42 28 C50 22, 58 24, 60 30" />
          </svg>
        );
      }

      function IconShoe({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <path d="M10 70 C25 65, 35 60, 45 65 C60 72, 75 72, 90 70 L90 78 L10 78 Z" />
            <path d="M44 58 L40 52 M48 60 L44 54 M52 62 L48 56" />
          </svg>
        );
      }

      function IconBag({ size = 48, className = '', style = {} }) {
        return (
          <svg viewBox="0 0 100 100" width={size} height={size} className={className} style={style} fill="none" stroke="currentColor" strokeWidth="5" strokeLinecap="round" strokeLinejoin="round">
            <rect x="18" y="35" width="64" height="50" rx="8" />
            <path d="M30 35 C30 25, 40 20, 50 20 C60 20, 70 25, 70 35" />
            <path d="M38 50 L38 55 M62 50 L62 55" />
          </svg>
        );
      }

      function renderPartnerIcon(type, color) {
        const style = { color };
        const size = window.innerWidth < 640 ? 36 : 44;
        switch (type) {
          case 'lotus':
            return <IconLotus size={size} style={style} />;
          case 'apple':
            return <IconApple size={size} style={style} />;
          case 'shoe':
            return <IconShoe size={size} style={style} />;
          case 'bag':
            return <IconBag size={size} style={style} />;
          case 'dumbbell':
          default:
            return <IconDumbbell size={size} style={style} />;
        }
      }

      const HERO_IMAGE_SRC = 'https://i.imgur.com/eKs0Yrj.png';

      const translations = {
        en: {
          nav: { merchants: "Partners", about: "About", contact: "Contact", how: "How it works" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Healthy Food",
            bioWellness: "Bio & Wellness",
          },
            slogan: "Enjoy exclusive discounts in Luxembourg",
          intro: "Save at gyms, health and wellness businesses across Luxembourg with a simple membership.",
          join: "Get started",
          priceTag: "\u20AC 9,99/month",
          team: "Meet the founders",
          teamIntro: "Students from Lycee ECG building a healthier Luxembourg.",
          login: "Login",
          register: "Sign up",
          account: "My account",
          logout: "Log out",
          partners: "Featured partners",
          demoMessage: "Thank you for your interest! Subscription feature coming soon.",
          ctaDetails: "Join today and unlock member savings everywhere.",
        },
        fr: {
          nav: { merchants: "Partenaires", about: "A propos", contact: "Contact", how: "Comment ca marche ?" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga et Pilates",
            healthyFood: "Cuisine saine",
            bioWellness: "Bio & bien-etre",
          },
          slogan: "Profitez de reductions exclusives au Luxembourg.",
          intro: "Economisez dans les salles de sport et les commerces de sante et de bien-etre partout au Luxembourg avec une seule adhesion.",
          join: "Commencer",
          priceTag: "\u20AC 9,99/mois",
          team: "Notre equipe",
          teamIntro: "Une equipe d'etudiants du Lycee ECG qui imagine un Luxembourg plus sain.",
          login: "Connexion",
          register: "Inscription",
          account: "Mon compte",
          logout: "Se deconnecter",
          partners: "Nos partenaires phares",
          demoMessage: "Merci pour votre interet ! La fonction d'abonnement arrive bientot.",
          ctaDetails: "Rejoignez-nous des aujourd'hui et profitez d'avantages partout.",
        },
        de: {
          nav: { merchants: "Partner", about: "Uber uns", contact: "Kontakt", how: "So funktioniert's" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Gesunde Ernaehrung",
            bioWellness: "Bio & Wellness",
          },
          slogan: "Exklusive Rabatte in Luxemburg geniessen.",
          intro: "Spare bei Fitness, Gesundheit und Wellness in ganz Luxemburg mit einer einfachen Mitgliedschaft.",
          join: "Jetzt starten",
          priceTag: "\u20AC 9,99 pro Monat",
          team: "Unser Team",
          teamIntro: "Ein Team vom Lycee ECG arbeitet an einem gesunden Luxemburg.",
          login: "Anmelden",
          register: "Registrieren",
          account: "Mein Konto",
          logout: "Abmelden",
          partners: "Unsere Highlights",
          demoMessage: "Vielen Dank fur Ihr Interesse! Die Abo-Funktion kommt bald.",
          ctaDetails: "Sichere dir heute Vorteile in der ganzen Stadt.",
        },
        lb: {
          nav: { merchants: "Partner", about: "Iwwer eis", contact: "Kontakt", how: "Wéi geet dat?" },
          categories: {
            fitness: "Fitness",
            yogaPilates: "Yoga & Pilates",
            healthyFood: "Gesond Iessen",
            bioWellness: "Bio & Wellness",
          },
          slogan: "Profiteier vun exklusive Rabatter zu Letzebuerg.",
          intro: "Spuer bei Fitness, Gesondheet a Wellness am ganze Land mat enger einfacher Memberschaft.",
          join: "Start hei",
          priceTag: "\u20AC 9,99/Mount",
          team: "Eist Team",
          teamIntro: "Eis Mini-Entreprise vum Lycee ECG mat engem Fokus op Gesondheet.",
          login: "Login",
          register: "Aschreiwen",
          account: "Mengen Account",
          logout: "Ausloggen",
          partners: "Eis Partner",
          demoMessage: "Merci fir dein Intressi! D'Abo-Funktioun kennt geschwenn.",
          ctaDetails: "Maach mat a kriss Membere Virdeeler iwwerall.",
        },
      };

      const partners = [
        { name: 'Factory 4', icon: 'dumbbell', color: '#8CC63F', discount: '15% off membership', hours: 'Daily 06:00-22:00', desc: 'Boutique training gym with strength, conditioning, and small-group coaching.' },
        { name: 'Elysium', icon: 'lotus', color: '#1B75BB', discount: '10% off classes', hours: 'Daily 07:00-21:00', desc: 'Premium wellness studio offering yoga, pilates, and recovery sessions.' },
      ];

      const teamMembers = [
        { name: 'Flyn SCHÜTZ', role: 'Finance & Strategy', image: 'https://i.imgur.com/1yjCvFO.png' },
        { name: 'Gabriel RECHE RECHE', role: 'Technology & Design', image: 'https://i.imgur.com/jQyH6zB.png' },
        { name: 'Max LEMAL', role: 'Marketing & Partnerships', image: 'https://i.imgur.com/mIFmNia.png' },
      ];

      const AUTH_KEY = 'hl-authenticated';
      const USER_KEY = 'hl-user';

      function AuthModal({ mode, onClose, onSubmit, onSwitchMode, error, successMessage }) {
        const isRegister = mode === 'register';
        const [form, setForm] = useState({ name: '', email: '', password: '' });

        useEffect(() => {
          setForm({ name: '', email: '', password: '' });
        }, [mode]);

        const handleChange = (event) => {
          const { name, value } = event.target;
          setForm((prev) => ({ ...prev, [name]: value }));
        };

        const handleSubmit = (event) => {
          event.preventDefault();
          onSubmit(mode, form);
        };

        return (
          <div className="fixed inset-0 z-50 flex items-center justify-center p-4">
            <div className="absolute inset-0 bg-black/70" onClick={onClose}></div>
            <div className="relative z-10 w-full max-w-md rounded-2xl border border-white/10 bg-neutral-900/95 p-4 sm:p-6 shadow-xl max-h-[90vh] overflow-y-auto">
              <div className="flex items-start justify-between mb-4">
                <h2 className="text-xl sm:text-2xl font-semibold text-white">
                  {isRegister ? 'Create account' : 'Log in'}
                </h2>
                <button
                  type="button"
                  onClick={onClose}
                  className="text-gray-400 hover:text-gray-200 transition text-2xl leading-none p-2 -m-2"
                  aria-label="Close authentication modal"
                >
                  &times;
                </button>
              </div>

              {successMessage && (
                <div className="mb-4 p-3 bg-green-500/20 border border-green-500/50 rounded-lg text-green-400 text-center">
                  {successMessage}
                </div>
              )}

              <form className="grid gap-4" onSubmit={handleSubmit}>
                {isRegister && (
                  <div className="grid gap-2">
                    <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="auth-name">Full name</label>
                    <input
                      id="auth-name"
                      name="name"
                      type="text"
                      required
                      placeholder="Your name"
                      value={form.name}
                      onChange={handleChange}
                      className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                    />
                  </div>
                )}

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="auth-email">Email</label>
                  <input
                    id="auth-email"
                    name="email"
                    type="email"
                    required
                    placeholder="you@example.com"
                    value={form.email}
                    onChange={handleChange}
                    className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                  />
                </div>

                <div className="grid gap-2">
                  <label className="text-sm uppercase tracking-wide text-gray-400" htmlFor="auth-password">Password</label>
                  <input
                    id="auth-password"
                    name="password"
                    type="password"
                    required
                    placeholder={isRegister ? 'Create a password (min. 4 characters)' : 'Enter your password'}
                    value={form.password}
                    onChange={handleChange}
                    className="w-full rounded-lg border border-white/20 bg-black/30 px-4 py-2.5 text-gray-100 focus:border-[#8cc63f] focus:outline-none"
                  />
                </div>

                {error && <p className="text-sm text-red-400">{error}</p>}

                <button
                  type="submit"
                  className="mt-2 w-full inline-flex justify-center rounded-lg bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-2.5 text-sm font-semibold text-[#04120c] shadow-[0_15px_35px_rgba(20,90,120,0.35)] transition hover:scale-[1.01] active:scale-[0.99]"
                >
                  {isRegister ? 'Create account' : 'Log in'}
                </button>
              </form>

              <p className="mt-4 text-sm text-gray-300 text-center">
                {isRegister ? 'Already have an account?' : 'New to Healthy Luxembourg?'}{' '}
                <button
                  type="button"
                  className="text-[#8cc63f] hover:underline"
                  onClick={() => onSwitchMode(isRegister ? 'login' : 'register')}
                >
                  {isRegister ? 'Log in instead' : 'Create an account'}
                </button>
              </p>
            </div>
          </div>
        );
      }

      function App() {
        const [language, setLanguage] = useState(() => localStorage.getItem('hl-lang') || 'en');
        const [user, setUser] = useState(() => {
          try {
            const authed = localStorage.getItem(AUTH_KEY) === 'true';
            if (!authed) { return null; }
            return getStoredUser();
          } catch (error) {
            console.warn('Failed to read stored authentication', error);
            return null;
          }
        });
        const [authMode, setAuthMode] = useState(null);
        const [authError, setAuthError] = useState('');
        const [authSuccess, setAuthSuccess] = useState('');
        const [mobileMenuOpen, setMobileMenuOpen] = useState(false);
        const [contactFormType, setContactFormType] = useState(null);
        
        const languages = Object.keys(translations);

        useEffect(() => { localStorage.setItem('hl-lang', language); }, [language]);

        const openAuthModal = (mode, successMsg = '') => {
          setAuthMode(mode);
          setAuthError('');
          setAuthSuccess(successMsg);
          setMobileMenuOpen(false);
        };

        const openContactForm = (type) => {
          setContactFormType(type);
          setMobileMenuOpen(false);
        };

        const closeContactForm = () => {
          setContactFormType(null);
        };

        const scrollToSection = (id) => {
          const el = document.getElementById(id);
          if (el) {
            el.scrollIntoView({ behavior: 'smooth', block: 'center' });
          }
          setMobileMenuOpen(false);
        };

        const closeAuthModal = () => {
          setAuthMode(null);
          setAuthError('');
          setAuthSuccess('');
        };

        const sendWelcomeEmail = async (userName, userEmail) => {
  try {
    // Your EmailJS credentials (replace with your actual values)
    const serviceId = 'service_njj5xgd'; // From Step 2
    const templateId = 'template_803vie8'; // From Step 2
    const publicKey = '-AqsZYcMuBDs6MFzO'; // From Step 2

    // Template parameters matching your template variables [citation:7]
    const templateParams = {
      name: userName,
      to_email: userEmail,
      from_name: "Healthy Luxembourg",
      reply_to: "healthyluxembourg.contact@gmail.com"
    };

    const response = await emailjs.send(
      serviceId,
      templateId,
      templateParams,
      publicKey
    );
    
    console.log('Welcome email sent successfully!', response.status, response.text);
    return true;
  } catch (error) {
    console.error('Failed to send welcome email:', error);
    return false;
  }
};

        const handleAuthSubmit = async (mode, formData) => {
          setAuthError('');
          setAuthSuccess('');
          
          let existingUsers = [];
          try {
            const usersRaw = localStorage.getItem('hl-users');
            existingUsers = usersRaw ? JSON.parse(usersRaw) : [];
          } catch (error) {
            console.warn('Failed to parse stored users', error);
            existingUsers = [];
          }
          
          const email = (formData.email || '').trim().toLowerCase();
          const password = (formData.password || '').trim();

          if (!email || !password) {
            setAuthError('Please enter your email and password.');
            return;
          }

          if (mode === 'login') {
            const foundUser = existingUsers.find(u => u.email === email && u.password === password);
            
            if (!foundUser) {
              setAuthError('Incorrect email or password.');
              return;
            }
            
            try {
              localStorage.setItem('hl-current-user-email', foundUser.email);
              localStorage.setItem(AUTH_KEY, 'true');
            } catch (error) {
              console.warn('Failed to persist user', error);
            }
            
            setUser(foundUser);
            closeAuthModal();
            return;
          }

          // REGISTER mode
          if ((formData.name || '').trim().length < 2) {
            setAuthError('Please enter your full name.');
            return;
          }

          if (password.length < 4) {
            setAuthError('Password must be at least 4 characters long.');
            return;
          }

          const emailExists = existingUsers.some(u => u.email === email);
          
          if (emailExists) {
            setAuthError('This email is already registered. Please log in instead.');
            return;
          }

          const newUser = {
            name: formData.name.trim(),
            email,
            password,
            createdAt: new Date().toISOString()
          };
          
          try {
            existingUsers.push(newUser);
            localStorage.setItem('hl-users', JSON.stringify(existingUsers));
            
            // Send welcome email
            await sendWelcomeEmail(newUser.name, newUser.email);
            
            setAuthSuccess('Account created successfully! Please check your email for a welcome message and then log in with your credentials.');
            setAuthMode('login');
            
          } catch (error) {
            console.warn('Failed to store new user', error);
            setAuthError('Failed to create account. Please try again.');
          }
        };

        const handleLogout = () => {
          setUser(null);
          try {
            localStorage.removeItem('hl-current-user-email');
            localStorage.setItem(AUTH_KEY, 'false');
          } catch (error) {
            console.warn('Failed to clear auth flag', error);
          }
        };

        const t = translations[language] || translations.en;

        const handleJoin = () => {
          openAuthModal('register');
        };

        const goToPartnersPage = () => {
          window.location.href = 'partners.html';
        };

        return (
          <div className="min-h-screen flex flex-col items-center">
            <nav className="sticky top-0 z-30 w-full border-b border-white/10 bg-[#0b1512]/80 backdrop-blur supports-[backdrop-filter]:bg-[#0b1512]/60">
              <div className="container-max mx-auto flex items-center justify-between px-4 sm:px-6 py-3 sm:py-4">
                <div className="flex items-center gap-2 sm:gap-3 flex-shrink-0">
                  <img src="https://i.imgur.com/eKs0Yrj.png" alt="Healthy Luxembourg logo" className="h-14 sm:h-20 md:h-24 w-auto drop-shadow-[0_8px_30px_rgba(27,117,187,0.35)]" />
                  <span className="text-base sm:text-lg font-semibold text-white whitespace-nowrap">
                    <span className="mr-1 font-black text-[#8cc63f]">Healthy</span>
                    <span className="hidden xs:inline">Luxembourg</span>
                    <span className="xs:hidden">LUX</span>
                  </span>
                </div>

                {/* Desktop Navigation */}
                <div className="hidden lg:flex items-center gap-4 xl:gap-8 text-sm text-white/70">
                  <Dropdown
                    label={t.nav.merchants}
                    items={[
                      {
                        label: 'Become partner',
                        onSelect: () => openContactForm('partner'),
                      },
                      {
                        label: 'List of partners',
                        onSelect: goToPartnersPage,
                      },
                    ]}
                  />
                  <button onClick={() => scrollToSection('about-section')} className="transition hover:text-white px-2 py-2">{t.nav.about}</button>
                  <button onClick={() => openContactForm('contact')} className="transition hover:text-white px-2 py-2">{t.nav.contact}</button>
                  <button onClick={() => scrollToSection('how-it-works-section')} className="transition hover:text-white px-2 py-2">{t.nav.how}</button>
                </div>

                <div className="flex items-center gap-1 sm:gap-2 md:gap-3">
                  <Dropdown
                    label={language === 'lb' ? 'LU' : language.toUpperCase()}
                    items={languages.map((code) => ({
                      label: code === 'lb' ? 'LU' : code.toUpperCase(),
                      onSelect: () => setLanguage(code),
                    }))}
                  />
                  
                  {/* Mobile menu button */}
                  <button
                    onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                    className="lg:hidden p-2 text-white/70 hover:text-white"
                    aria-label="Toggle menu"
                  >
                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      {mobileMenuOpen ? (
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                      ) : (
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
                      )}
                    </svg>
                  </button>

                  {/* Desktop auth buttons */}
                  <div className="hidden md:flex items-center gap-2">
                    {user ? (
                      <>
                        <button
                          onClick={() => (window.location.href = 'payment.html')}
                          className="rounded-full border border-[#8cc63f]/60 bg-[#8cc63f]/10 px-3 py-1.5 text-xs font-medium text-[#8cc63f] transition hover:bg-[#8cc63f]/20 whitespace-nowrap"
                        >
                          {t.account}: {user.name.split(' ')[0]}
                        </button>
                        <button
                          onClick={handleLogout}
                          className="rounded-full border border-white/20 bg-transparent px-3 py-1.5 text-xs font-medium text-white/70 transition hover:border-white/40 hover:text-white whitespace-nowrap"
                        >
                          {t.logout}
                        </button>
                      </>
                    ) : (
                      <>
                        <button
                          onClick={() => openAuthModal('login')}
                          className="rounded-full border border-white/20 bg-transparent px-3 py-1.5 text-xs font-medium text-white/70 transition hover:border-white/40 hover:text-white whitespace-nowrap"
                        >
                          {t.login}
                        </button>
                        <button
                          onClick={() => openAuthModal('register')}
                          className="rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-3 py-1.5 text-xs font-semibold text-[#04120c] shadow-[0_15px_35px_rgba(18,85,118,0.4)] transition hover:scale-[1.03] active:scale-[0.98] whitespace-nowrap"
                        >
                          {t.register}
                        </button>
                      </>
                    )}
                  </div>
                </div>
              </div>

              {/* Mobile menu */}
              {mobileMenuOpen && (
                <div className="lg:hidden border-t border-white/10 bg-[#0b1512]/95">
                  <div className="container-max mx-auto px-4 py-4 flex flex-col gap-2">
                    <Dropdown
                      label={t.nav.merchants}
                      items={[
                        {
                          label: 'Become partner',
                          onSelect: () => {
                            openContactForm('partner');
                            setMobileMenuOpen(false);
                          },
                        },
                        {
                          label: 'List of partners',
                          onSelect: () => {
                            goToPartnersPage();
                            setMobileMenuOpen(false);
                          },
                        },
                      ]}
                    />
                    <button onClick={() => scrollToSection('about-section')} className="py-3 text-left text-white/70 hover:text-white">About</button>
                    <button onClick={() => {
                      openContactForm('contact');
                      setMobileMenuOpen(false);
                    }} className="py-3 text-left text-white/70 hover:text-white">Contact</button>
                    <button onClick={() => scrollToSection('how-it-works-section')} className="py-3 text-left text-white/70 hover:text-white">How it works</button>
                    
                    {/* Mobile auth buttons */}
                    <div className="flex flex-col gap-2 pt-4 border-t border-white/10">
                      {user ? (
                        <>
                          <button
                            onClick={() => {
                              window.location.href = 'payment.html';
                              setMobileMenuOpen(false);
                            }}
                            className="w-full rounded-full border border-[#8cc63f]/60 bg-[#8cc63f]/10 px-4 py-3 text-sm font-medium text-[#8cc63f]"
                          >
                            {t.account}: {user.name.split(' ')[0]}
                          </button>
                          <button
                            onClick={() => {
                              handleLogout();
                              setMobileMenuOpen(false);
                            }}
                            className="w-full rounded-full border border-white/20 bg-transparent px-4 py-3 text-sm font-medium text-white/70"
                          >
                            {t.logout}
                          </button>
                        </>
                      ) : (
                        <>
                          <button
                            onClick={() => openAuthModal('login')}
                            className="w-full rounded-full border border-white/20 bg-transparent px-4 py-3 text-sm font-medium text-white/70"
                          >
                            {t.login}
                          </button>
                          <button
                            onClick={() => openAuthModal('register')}
                            className="w-full rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-4 py-3 text-sm font-semibold text-[#04120c]"
                          >
                            {t.register}
                          </button>
                        </>
                      )}
                    </div>
                  </div>
                </div>
              )}
            </nav>

            <main className="flex-1 w-full">
              <section className="relative px-4 sm:px-6 pt-12 sm:pt-16 pb-16 sm:pb-24 md:pt-24">
                <div className="container-max mx-auto">
                  <div className="grid items-center gap-8 lg:gap-16 lg:grid-cols-[1.05fr_1fr]">
                    <div className="space-y-6 sm:space-y-8 text-left">
                      <div className="inline-flex w-fit items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 sm:px-5 py-1.5 sm:py-2 text-xs font-semibold uppercase tracking-[0.25em] sm:tracking-[0.35em] text-[#8cc63f]">
                        Healthy Luxembourg
                      </div>
                      <h1 className="text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-semibold leading-[1.08] pb-1 sm:pb-2 text-transparent bg-clip-text bg-gradient-to-r from-[#8cc63f] to-[#1b75bb]">
                        {t.slogan}
                      </h1>
                      <div className="flex flex-wrap items-center gap-3 sm:gap-4 text-2xl sm:text-3xl md:text-4xl font-semibold text-[#8cc63f]">
                        {t.priceTag}
                      </div>
                      <p className="max-w-xl text-base sm:text-lg text-gray-300">
                        {t.intro}
                      </p>
                      <div className="flex flex-col gap-4 sm:flex-row sm:items-center">
                        <button
                          onClick={handleJoin}
                          className="w-full sm:w-auto inline-flex items-center justify-center rounded-full bg-gradient-to-r from-[#8cc63f] via-[#58b0d8] to-[#1b75bb] px-6 sm:px-8 py-3 text-base sm:text-lg font-semibold text-[#04120c] shadow-[0_25px_45px_rgba(15,70,110,0.45)] transition hover:scale-[1.02] active:scale-[0.98]"
                        >
                          {t.join}
                        </button>
                        <div className="flex items-center gap-3 text-sm text-gray-300">
                          <span className="inline-flex h-10 w-10 sm:h-11 sm:w-11 items-center justify-center rounded-full border border-white/15 bg-white/5 text-base font-semibold text-[#8cc63f] flex-shrink-0">
                            %
                          </span>
                          <span className="text-xs sm:text-sm leading-relaxed">
                            {t.ctaDetails}
                          </span>
                        </div>
                      </div>
                    </div>
                    <div className="relative min-h-[200px] sm:min-h-[360px] flex items-center justify-center lg:justify-end">
                        <div className="pointer-events-none">
                          <img
                            src={HERO_IMAGE_SRC}
                            alt="Healthy Luxembourg logo background"
                            className="h-[180px] sm:h-[280px] md:h-[350px] lg:h-[420px] w-auto max-w-[90vw] opacity-16 sm:opacity-20 drop-shadow-[0_30px_70px_rgba(7,20,16,0.45)]"
                          />
                        </div>
                      </div>
                  </div>

                  <div className="mt-16 sm:mt-20 scroll-mt-32" id="partners">
                    <h2 className="text-center text-xs sm:text-sm font-semibold uppercase tracking-[0.25em] sm:tracking-[0.35em] text-[#8cc63f]">{t.partners}</h2>
                    <div className="mt-6 sm:mt-8 mx-auto grid max-w-4xl grid-cols-1 sm:grid-cols-2 justify-items-center gap-4 sm:gap-6">
                      {partners.map((partner, index) => (
                        <div
                          key={index}
                          className="relative w-full overflow-hidden rounded-xl sm:rounded-2xl border border-white/10 bg-[#0f1d18]/80 p-4 sm:p-6 shadow-[0_20px_45px_rgba(7,20,16,0.4)] transition hover:-translate-y-1 hover:border-[#8cc63f]/40"
                        >
                          <div className="flex items-start gap-3 sm:gap-4">
                            <div
                              className="flex h-10 w-10 sm:h-12 sm:w-12 flex-shrink-0 items-center justify-center rounded-xl sm:rounded-2xl border bg-white/5"
                              style={{ borderColor: `${partner.color}55`, background: `linear-gradient(135deg, ${partner.color}1a 0%, rgba(9,22,18,0.8) 100%)` }}
                            >
                              {renderPartnerIcon(partner.icon, partner.color)}
                            </div>
                            <div className="min-w-0 flex-1">
                              <h3 className="text-base sm:text-lg font-semibold text-white truncate">{partner.name}</h3>
                              <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300 line-clamp-2">{partner.desc}</p>
                              <div className="mt-3 sm:mt-4 flex flex-wrap items-center gap-2 text-xs">
                                <span
                                  className="inline-flex items-center rounded-full border px-2 sm:px-3 py-0.5 sm:py-1 font-medium"
                                  style={{ borderColor: `${partner.color}55`, color: partner.color }}
                                >
                                  {partner.discount}
                                </span>
                                <span className="inline-flex items-center rounded-full border border-white/15 bg-white/5 px-2 sm:px-3 py-0.5 sm:py-1 text-gray-300">
                                  {partner.hours}
                                </span>
                              </div>
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div className="mt-16 sm:mt-24 rounded-2xl sm:rounded-3xl border border-white/10 bg-[#0f1d19]/70 p-6 sm:p-8 md:p-12 shadow-[0_25px_60px_rgba(7,20,16,0.4)]" id="about-section">
                    <div className="flex flex-col gap-4 sm:gap-6 md:flex-row md:items-end md:justify-between">
                      <div>
                        <h2 className="text-2xl sm:text-3xl md:text-4xl font-semibold text-white">{t.team}</h2>
                        <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300">
                          {(t.teamIntro || 'Students from Lycee ECG building a healthier Luxembourg.')}
                        </p>
                      </div>
                      <div className="flex items-center gap-3 text-xs uppercase tracking-[0.25em] sm:tracking-[0.35em] text-white/50">
                        <span className="inline-flex h-2 w-2 rounded-full bg-[#8cc63f]"></span>
                        {new Date().getFullYear()}
                      </div>
                    </div>
                    <div className="mt-8 sm:mt-10 grid gap-4 sm:gap-6 grid-cols-1 sm:grid-cols-3">
                      {teamMembers.map((member, index) => (
                        <div
                          key={index}
                          className="group relative flex flex-col items-center overflow-hidden rounded-xl sm:rounded-2xl border border-white/10 bg-white/5 p-4 sm:p-6 text-center shadow-[0_20px_45px_rgba(6,18,14,0.4)] transition hover:-translate-y-1 hover:border-[#8cc63f]/40"
                        >
                          {member.image ? (
                            <div className="relative mb-4 sm:mb-5 h-28 w-28 sm:h-32 sm:w-32 md:h-36 md:w-36 overflow-hidden rounded-full sm:rounded-none bg-transparent">
                              <img
                                src={member.image}
                                alt={`${member.name} portrait`}
                                className="h-full w-full object-cover object-center opacity-90 transition duration-200 group-hover:scale-[1.02] filter brightness-90 contrast-105"
                              />
                            </div>
                          ) : (
                            <div className="relative mb-4 sm:mb-5 h-28 w-28 sm:h-32 sm:w-32 md:h-36 md:w-36 overflow-hidden rounded-full sm:rounded-none bg-gradient-to-br from-[#8cc63f]/35 via-[#0f271f] to-[#1b75bb]/35">
                              <div className="absolute inset-0 flex items-end justify-center pb-3 sm:pb-4 text-base sm:text-lg font-semibold text-white/90 uppercase tracking-[0.2em] sm:tracking-[0.3em]">
                                {member.name.split(' ')[0]}
                              </div>
                            </div>
                          )}
                          <h3 className="text-base sm:text-lg font-semibold text-white">{member.name}</h3>
                          <p className="mt-1 sm:mt-2 text-xs sm:text-sm text-gray-300">{member.role}</p>
                        </div>
                      ))}
                    </div>
                  </div>

                  <div id="how-it-works-section" className="hidden"></div>
                </div>
              </section>
            </main>

            {authMode && (
              <AuthModal
                mode={authMode}
                onClose={closeAuthModal}
                onSubmit={handleAuthSubmit}
                onSwitchMode={(mode) => openAuthModal(mode)}
                error={authError}
                successMessage={authSuccess}
              />
            )}

            {contactFormType && (
              <ContactFormModal
                type={contactFormType}
                onClose={closeContactForm}
              />
            )}

            <footer className="w-full px-4 sm:px-6 pb-8 sm:pb-12 text-center text-xs sm:text-sm text-white/40">
              <p>&copy; {new Date().getFullYear()} Healthy Luxembourg &mdash; All rights reserved.</p>
            </footer>
          </div>
        );
      }

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>



